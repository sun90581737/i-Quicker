@{
    ViewBag.Title = "数据采集";
    Layout = "~/Views/Shared/_Index.cshtml";
}
<script src="~/Content/js/jquery/jquery-2.1.1.min.js"></script>
<script src="~/Content/js/echarts/echarts-all.js"></script>
<script src="~/Content/js/echarts/infographic.js"></script>
<script src="~/Content/js/bootstrap/bootstrap.js"></script>
<link href="~/Content/js/bootstrap/bootstrap.min.css" rel="stylesheet" />
<link href="~/Content/js/pages/AdminLTE.css" rel="stylesheet" />
<link href="~/Content/js/pages/AdminLTE.min.css" rel="stylesheet" />
<style>
    .container {
        background-color: #330099;
        border-radius: 43px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-around;
        padding: 10px 22px;
        height: 160px;
        width: 15px;
    }
    .circle {
        background-color: rgba(0, 0, 0, 0.3);
        border-radius: 100%;
        position: relative;
        height: 40px;
        width: 40px;
    }
    .circle::after {
        border-right: 4px solid rgba(255, 255, 255, 0.6);
        border-radius: 100%;
        content: ' ';
        position: absolute;
        top: 5px;
        left: 0px;
        width: 30px;
        height: 30px;
    }
    .circle.red {
        background-color: #c0392b;
        box-shadow: 0 0 20px 5px #c0392b;
    }
    .circle.yellow {
        background-color: #f1c40f;
        box-shadow: 0 0 20px 5px #f1c40f;
    }
    .circle.green {
        background-color: green;
        box-shadow: 0 0 20px 5px green;
    }
</style>


<body>
    <div class="row">
        <section class="col-lg-6 connectedSortable" style="width:25%">
            <div class="box box-default">
                <div id="div1" class="box-header with-border" style="border-bottom:1px solid #d2d6de">
                    <h6 id="a1" style="font-weight:800;font-size:13px;display:inline-block;margin:0;line-height:1"></h6>
                    <h6 id="b1" style="float:right;font-weight:800;font-size:13px;display:inline-block;margin:0;line-height:1"></h6>
                </div>
                <div class="tab-content" style="height:160px">
                    <div style="width:100px;height:100px;position:absolute;left:10%;top:10%;transform:translate(-10%,-10%);">
                        <img id="imageId1" style="width:100px;height:100px" src="" />
                    </div>
                    <div style="width:50%;float:right">
                        <div class="container">
                            <div id="c1" class="circle" color="yellow"></div>
                            <div id="d1" class="circle" color="green"></div>
                            <div id="e1" class="circle" color="red"></div>
                        </div>
                    </div>
                </div>
                <div class="box-header with-border" style="height:100%;border-top:1px solid #d2d6de;border-bottom:1px solid #d2d6de">
                    <div style="float:left;width:50%">
                        <div style="text-align:center;font-size:13px;">今日产量(件)</div>
                        <br />
                        <div id="f1" style="text-align:center;color:#00FF00; font-size:18px;font-weight:800;"></div>
                    </div>
                    <div style="margin-left:50%;width:auto;">
                        <div style="text-align:center;font-size:13px;">今日稼动率(%)</div>
                        <br />
                        <div id="g1" style="text-align:center;color:#00FF00; font-size:18px;font-weight:800;"></div>
                    </div>
                </div>
                <div class="box-header with-border" style="height:258px; border-bottom:1px solid #d2d6de">
                    <div id="maina" style="width: 100%;height: 320px;"></div>
                </div>
                <div class="box-header with-border" style="height:258px;">
                    <div id="mainb" style="width: 100%;height: 320px;"></div>
                </div>
                <div class="box-header with-border" style="height:80px;border-top:1px solid #d2d6de;border-bottom:1px solid #d2d6de">
                    <div style="float:left;width:33%">
                        <div style="text-align:center;font-size:13px;">主轴倍率(%)</div>
                        <br />
                        <div id="h1" style="text-align:center;color:#00FF00; font-size:18px;font-weight:800;"></div>
                    </div>
                    <div style="float:left;width:33%">
                        <div style="text-align:center;font-size:13px;">进给倍率(%)</div>
                        <br />
                        <div id="i1" style="text-align:center;color:#00FF00; font-size:18px;font-weight:800;"></div>
                    </div>
                    <div style="margin-left:50%;width:auto;">
                        <div style="text-align:center;font-size:13px;">负载(%)</div>
                        <br />
                        <div id="j1" style="text-align:center;color:#00FF00; font-size:18px;font-weight:800;"></div>
                    </div>
                </div>
            </div>
        </section>
        <section class="col-lg-6 connectedSortable" style="width:25%">
            <div class="box box-default">
                <div class="box-header with-border" style="background-color:yellow;border-bottom:1px solid #d2d6de">
                    <h6 style="font-weight:800;font-size:13px;display:inline-block;margin:0;line-height:1">CNC1发那科</h6>
                    <h6 style="float:right;font-weight:800;font-size:13px;display:inline-block;margin:0;line-height:1">运行中</h6>
                </div>
                <div class="tab-content" style="height:160px">
                    <div style="width:100px;height:100px;position:absolute;left:10%;top:10%;transform:translate(-10%,-10%);">
                        <img style="width:100px;height:100px" src="~/Content/img/product/collection/cnc1.png" />
                    </div>
                    <div style="width:50%;float:right">
                        <div class="container">
                            <div class="circle yellow" color="yellow"></div>
                            <div class="circle" color="green"></div>
                            <div class="circle" color="red"></div>
                        </div>
                    </div>
                </div>
                <div class="box-header with-border" style="height:100%;border-top:1px solid #d2d6de;border-bottom:1px solid #d2d6de">
                    <div style="float:left;width:50%">
                        <div style="text-align:center;font-size:13px;">今日产量(件)</div>
                        <br />
                        <div style="text-align:center;color:#00FF00; font-size:18px;font-weight:800;">10</div>
                    </div>
                    <div style="margin-left:50%;width:auto;">
                        <div style="text-align:center;font-size:13px;">今日稼动率(%)</div>
                        <br />
                        <div style="text-align:center;color:#00FF00; font-size:18px;font-weight:800;">48.3</div>
                    </div>
                </div>
                <div class="box-header with-border" style="height:258px; border-bottom:1px solid #d2d6de">
                    <div id="maina" style="width: 100%;height: 320px;"></div>
                </div>
                <div class="box-header with-border" style="height:258px;">
                    <div id="mainb" style="width: 100%;height: 320px;"></div>
                </div>
                <div class="box-header with-border" style="height:80px;border-top:1px solid #d2d6de;border-bottom:1px solid #d2d6de">
                    <div style="float:left;width:33%">
                        <div style="text-align:center;font-size:13px;">主轴倍率(%)</div>
                        <br />
                        <div style="text-align:center;color:#00FF00; font-size:18px;font-weight:800;">100</div>
                    </div>
                    <div style="float:left;width:33%">
                        <div style="text-align:center;font-size:13px;">进给倍率(%)</div>
                        <br />
                        <div style="text-align:center;color:#00FF00; font-size:18px;font-weight:800;">70</div>
                    </div>
                    <div style="margin-left:50%;width:auto;">
                        <div style="text-align:center;font-size:13px;">负载(%)</div>
                        <br />
                        <div style="text-align:center;color:#00FF00; font-size:18px;font-weight:800;">6%</div>
                    </div>
                </div>
            </div>
        </section>
        <section class="col-lg-6 connectedSortable" style="width:25%">
            <div class="box box-default">
                <div class="box-header with-border" style="background-color:yellow;border-bottom:1px solid #d2d6de">
                    <h6 style="font-weight:800;font-size:13px;display:inline-block;margin:0;line-height:1">CNC1发那科</h6>
                    <h6 style="float:right;font-weight:800;font-size:13px;display:inline-block;margin:0;line-height:1">运行中</h6>
                </div>
                <div class="tab-content" style="height:160px">
                    <div style="width:100px;height:100px;position:absolute;left:10%;top:10%;transform:translate(-10%,-10%);">
                        <img style="width:100px;height:100px" src="~/Content/img/product/collection/cnc1.png" />
                    </div>
                    <div style="width:50%;float:right">
                        <div class="container">
                            <div class="circle yellow" color="yellow"></div>
                            <div class="circle" color="green"></div>
                            <div class="circle" color="red"></div>
                        </div>
                    </div>
                </div>
                <div class="box-header with-border" style="height:100%;border-top:1px solid #d2d6de;border-bottom:1px solid #d2d6de">
                    <div style="float:left;width:50%">
                        <div style="text-align:center;font-size:13px;">今日产量(件)</div>
                        <br />
                        <div style="text-align:center;color:#00FF00; font-size:18px;font-weight:800;">10</div>
                    </div>
                    <div style="margin-left:50%;width:auto;">
                        <div style="text-align:center;font-size:13px;">今日稼动率(%)</div>
                        <br />
                        <div style="text-align:center;color:#00FF00; font-size:18px;font-weight:800;">48.3</div>
                    </div>
                </div>
                <div class="box-header with-border" style="height:258px; border-bottom:1px solid #d2d6de">
                    <div id="maina" style="width: 100%;height: 320px;"></div>
                </div>
                <div class="box-header with-border" style="height:258px;">
                    <div id="mainb" style="width: 100%;height: 320px;"></div>
                </div>
                <div class="box-header with-border" style="height:80px;border-top:1px solid #d2d6de;border-bottom:1px solid #d2d6de">
                    <div style="float:left;width:33%">
                        <div style="text-align:center;font-size:13px;">主轴倍率(%)</div>
                        <br />
                        <div style="text-align:center;color:#00FF00; font-size:18px;font-weight:800;">100</div>
                    </div>
                    <div style="float:left;width:33%">
                        <div style="text-align:center;font-size:13px;">进给倍率(%)</div>
                        <br />
                        <div style="text-align:center;color:#00FF00; font-size:18px;font-weight:800;">70</div>
                    </div>
                    <div style="margin-left:50%;width:auto;">
                        <div style="text-align:center;font-size:13px;">负载(%)</div>
                        <br />
                        <div style="text-align:center;color:#00FF00; font-size:18px;font-weight:800;">6%</div>
                    </div>
                </div>
            </div>
        </section>
        <section class="col-lg-6 connectedSortable" style="width:25%">
            <div class="box box-default">
                <div class="box-header with-border" style="background-color:yellow;border-bottom:1px solid #d2d6de">
                    <h6 style="font-weight:800;font-size:13px;display:inline-block;margin:0;line-height:1">CNC1发那科</h6>
                    <h6 style="float:right;font-weight:800;font-size:13px;display:inline-block;margin:0;line-height:1">运行中</h6>
                </div>
                <div class="tab-content" style="height:160px">
                    <div style="width:100px;height:100px;position:absolute;left:10%;top:10%;transform:translate(-10%,-10%);">
                        <img style="width:100px;height:100px" src="~/Content/img/product/collection/cnc1.png" />
                    </div>
                    <div style="width:50%;float:right">
                        <div class="container">
                            <div class="circle yellow" color="yellow"></div>
                            <div class="circle" color="green"></div>
                            <div class="circle" color="red"></div>
                        </div>
                    </div>
                </div>
                <div class="box-header with-border" style="height:100%;border-top:1px solid #d2d6de;border-bottom:1px solid #d2d6de">
                    <div style="float:left;width:50%">
                        <div style="text-align:center;font-size:13px;">今日产量(件)</div>
                        <br />
                        <div style="text-align:center;color:#00FF00; font-size:18px;font-weight:800;">10</div>
                    </div>
                    <div style="margin-left:50%;width:auto;">
                        <div style="text-align:center;font-size:13px;">今日稼动率(%)</div>
                        <br />
                        <div style="text-align:center;color:#00FF00; font-size:18px;font-weight:800;">48.3</div>
                    </div>
                </div>
                <div class="box-header with-border" style="height:258px; border-bottom:1px solid #d2d6de">
                    <div id="maina" style="width: 100%;height: 320px;"></div>
                </div>
                <div class="box-header with-border" style="height:258px;">
                    <div id="mainb" style="width: 100%;height: 320px;"></div>
                </div>
                <div class="box-header with-border" style="height:80px;border-top:1px solid #d2d6de;border-bottom:1px solid #d2d6de">
                    <div style="float:left;width:33%">
                        <div style="text-align:center;font-size:13px;">主轴倍率(%)</div>
                        <br />
                        <div style="text-align:center;color:#00FF00; font-size:18px;font-weight:800;">100</div>
                    </div>
                    <div style="float:left;width:33%">
                        <div style="text-align:center;font-size:13px;">进给倍率(%)</div>
                        <br />
                        <div style="text-align:center;color:#00FF00; font-size:18px;font-weight:800;">70</div>
                    </div>
                    <div style="margin-left:50%;width:auto;">
                        <div style="text-align:center;font-size:13px;">负载(%)</div>
                        <br />
                        <div style="text-align:center;color:#00FF00; font-size:18px;font-weight:800;">6%</div>
                    </div>
                </div>
            </div>
        </section>
    </div>


    <script>
        $(function () {
            LoadAllData();
        })

        function LoadAllData()
        {
            $.ajax({
                async: false,
                url: "/AutomationLine/DataAcquisition/GetDataAcquisition",
                type: "get",
                dataType: "json",
                success: function (da) {
                    $(da).each(function (index, item) {
                        if (index == 0)
                        {
                            $("#div1").css({ "background-color": item.DeviceLndicatorLight});
                            $("#a1").text(item.DeviceName);
                            $("#b1").text(item.DeviceRunStatus);
                            $("#imageId1").attr("src", item.DeviceUrl);
                            if (item.DeviceLndicatorLight == "yellow") {
                                $("#c1").css({ "background-color": "yellow" });
                            } else if (item.DeviceLndicatorLight == "green") {
                                $("#d1").css({ "background-color": "green" });
                            } else if (item.DeviceLndicatorLight == "red") {
                                $("#e1").css({ "background-color": "red" });
                            }
                            $("#f1").text(item.TodayOutput);
                            $("#g1").text(item.TodayJiadong);
                            loadSpindle("maina",item.SpindleSpeed);
                            loadFeed("mainb", item.FeedSpeed);
                            $("#h1").text(item.SpindleRatio);
                            $("#i1").text(item.FeedRatio);
                            $("#j1").text(item.LoadRatio + "%");
                        }
                    })
                }
            })
        }

        function loadSpindle(divId,tempCount) {
            var myChart = echarts.init(document.getElementById(divId));
            option = {
                series: [
                    {
                        name: '业务指标',
                        type: 'gauge',
                        min: 0,
                        max: 30000,
                        splitNumber: 10,       // 分割段数，默认为5
                        axisLine: {            // 坐标轴线
                            lineStyle: {       // 属性lineStyle控制线条样式
                                color: [[0.2, '#228b22'], [0.8, '#48b'], [1, '#ff4500']],
                                width: 2
                            }
                        },
                        axisTick: {            // 坐标轴小标记
                            splitNumber: 10,   // 每份split细分多少段
                            length: 10,        // 属性length控制线长
                            lineStyle: {       // 属性lineStyle控制线条样式
                                color: 'auto'
                            }
                        },
                        axisLabel: {           // 坐标轴文本标签，详见axis.axisLabel
                            textStyle: {       // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                                color: 'auto'
                            }
                        },
                        splitLine: {           // 分隔线
                            show: true,        // 默认显示，属性show控制显示与否
                            length: 12,         // 属性length控制线长
                            lineStyle: {       // 属性lineStyle（详见lineStyle）控制线条样式
                                color: 'auto'
                            }
                        },

                        detail: {
                            formatter: '{value}',
                            textStyle: {       // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                                color: 'auto',
                                fontWeight: 'bolder',
                                fontSize: 20
                            }
                        },
                        data: [{ value: tempCount, name: '主轴转速(r/min)' }]
                    }
                ]
            };
            myChart.setOption(option);
        }
        function loadFeed(divId, tempCount) {
            var myChart = echarts.init(document.getElementById(divId));
            option = {
                series: [
                    {
                        name: '业务指标',
                        type: 'gauge',
                        min: 0,
                        max: 10000,
                        splitNumber: 10,       // 分割段数，默认为5
                        axisLine: {            // 坐标轴线
                            lineStyle: {       // 属性lineStyle控制线条样式
                                color: [[0.2, '#228b22'], [0.8, '#48b'], [1, '#ff4500']],
                                width: 2
                            }
                        },
                        axisTick: {            // 坐标轴小标记
                            splitNumber: 10,   // 每份split细分多少段
                            length: 10,        // 属性length控制线长
                            lineStyle: {       // 属性lineStyle控制线条样式
                                color: 'auto'
                            }
                        },
                        axisLabel: {           // 坐标轴文本标签，详见axis.axisLabel
                            textStyle: {       // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                                color: 'auto'
                            }
                        },
                        splitLine: {           // 分隔线
                            show: true,        // 默认显示，属性show控制显示与否
                            length: 12,         // 属性length控制线长
                            lineStyle: {       // 属性lineStyle（详见lineStyle）控制线条样式
                                color: 'auto'
                            }
                        },

                        detail: {
                            formatter: '{value}',
                            textStyle: {       // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                                color: 'auto',
                                fontWeight: 'bolder',
                                fontSize: 20
                            }
                        },
                        data: [{ value: tempCount, name: '进给速度(mm/min)' }]
                    }
                ]
            };
            myChart.setOption(option);
        }
    </script>
</body>

